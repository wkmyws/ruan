(function(e){function t(t){for(var o,i,r=t[0],l=t[1],c=t[2],u=0,p=[];u<r.length;u++)i=r[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],o=!0,r=1;r<a.length;r++){var l=a[r];0!==s[l]&&(o=!1)}o&&(n.splice(t--,1),e=i(i.s=a[0]))}return e}var o={},s={app:0},n=[];function i(t){if(o[t])return o[t].exports;var a=o[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=e,i.c=o,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(a,o,function(t){return e[t]}.bind(null,o));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var o=a("85ec"),s=a.n(o);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},n=[],i={name:"App"},r=i,l=(a("034f"),a("2877")),c=Object(l["a"])(r,s,n,!1,null,null,null),d=c.exports,u=a("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"login_box"}},[a("h2",[e._v("LOGIN")]),a("div",{attrs:{id:"form"}},[a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}})],1),a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]),a("br"),a("br"),a("div",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.postdata}},[e._v("login")])],1),e._m(0)])},_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Sign"}},[a("a",{attrs:{href:"http://baidu.com"}},[e._v("修改密码")])])}],m={data:function(){return{user:"",password:""}},methods:{postdata:function(){var e=this,t=this.password;localStorage.setItem("usr",this.user),this.$axios.post(this.GLOBAL.config_ip+"/login/",{usr:this.user,pwd:this.password}).then((function(a){console.log(a.data.code),0==a.data.code?1==a.data.identify?(localStorage.setItem("token",a.data.token),location.href="000"==t?"#/resetpassword":"#/student_class"):(localStorage.setItem("token",a.data.token),location.href="#/teacher"):e.$message({showClose:!0,message:"用户名密码不匹配",type:"error"})})).catch((function(e){console.log(e)}))}}},h=m,f=(a("9ce0"),Object(l["a"])(h,p,_,!1,null,null,null)),g=f.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"login_box"}},[a("h2",[e._v("上传文件")]),e._m(0),a("br"),a("br"),a("div",[a("el-button",{attrs:{type:"primary",plain:"",id:"b1"},on:{click:e.submit}},[e._v("上传文件")])],1)])},w=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"form"}},[a("div",{attrs:{id:"input_box"}},[a("input",{attrs:{type:"file",id:"_f"}}),a("br"),a("br")])])}],k={headers:{"Content-Type":"multipart/form-data"}},v={data:function(){return{work_code:""}},methods:{submit:function(){var e=this,t=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),a=_f.files[0],o=a.size/1024;o=Math.round(o);var s=new FormData;s.append("file",_f.files[0]),s.append("work_code",localStorage.getItem("work_code")),s.append("token",localStorage.getItem("token")),this.$confirm("你的文件大小为"+o+"kb,是否上传","是否上传?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$axios.post(e.GLOBAL.config_ip+"/submit_work/",s,k).then((function(a){if(console.log(a.data),0==a.data.code)t.close(),localStorage.setItem("token",a.data.token),e.$message({showClose:!0,message:"恭喜你,上传成功",type:"success"}),location.href="#/student_work";else{switch(a.data.code){case 1:e.$message({showClose:!0,message:"token错误",type:"error"});break;case 2:e.$message({showClose:!0,message:"权限错误",type:"error"});break;case 3:e.$message({showClose:!0,message:"数据库错误",type:"error"});break;case 4:e.$message({showClose:!0,message:"参数错误",type:"error"});break;case 11:e.$message({showClose:!0,message:"用户名和密码错误",type:"error"});break;case 21:e.$message({showClose:!0,message:"作业名为空",type:"error"});break;case 22:e.$message({showClose:!0,message:"作业码生成错误",type:"error"});break;case 23:e.$message({showClose:!0,message:"作业码解析错误",type:"error"});break;case 24:e.$message({showClose:!0,message:"上传时间截止",type:"error"});break;case 25:e.$message({showClose:!0,message:"作业所属班级为空",type:"error"});break;case 26:e.$message({showClose:!0,message:"当前用户不在此班级，无法操作此作业",type:"error"});break;case 41:e.$message({showClose:!0,message:"未上传文件",type:"error"});break;case 42:e.$message({showClose:!0,message:"上传文件不为word",type:"error"});break;case 5:e.$message({showClose:!0,message:"文件不存在",type:"error"});break;case 51:e.$message({showClose:!0,message:"不存在该预览作业",type:"error"});break;case 52:e.$message({showClose:!0,message:"无法转化当前word为pdf",type:"error"});break;default:e.$message({showClose:!0,message:"操作错误",type:"error"});break}t.close()}})).catch((function(e){alert(e+"请勿重复提交")}))})).catch((function(){e.$message({type:"info",message:"已取消上传"}),t.close()}))}}},y=v,x=Object(l["a"])(y,b,w,!1,null,null,null),$=x.exports,S=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"link"}},[a("i",{staticClass:"el-icon-house"}),a("el-link",{attrs:{type:"primary",href:"#/login"}},[e._v("退出登录")])],1),a("div",{staticClass:"发作业"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{staticClass:"el-icon-edit",attrs:{slot:"label"},slot:"label"},[e._v("发布作业")]),a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"作业名称"},model:{value:e.publish_work_name,callback:function(t){e.publish_work_name=t},expression:"publish_work_name"}})],1),a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:12},placeholder:"作业要求"},model:{value:e.publish_work_desc,callback:function(t){e.publish_work_desc=t},expression:"publish_work_desc"}})],1),a("br"),a("div",{attrs:{id:"input_box"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择提交作业的截止日期"},model:{value:e.publish_work_deadline,callback:function(t){e.publish_work_deadline=t},expression:"publish_work_deadline"}}),a("el-select",{attrs:{clearable:"",placeholder:"请选择接收任务的班级"},model:{value:e.publish_work_class,callback:function(t){e.publish_work_class=t},expression:"publish_work_class"}},e._l(e.options,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("br"),a("br"),a("div",[a("el-button",{attrs:{type:"primary",sizes:"medium",plain:"",icon:"el-icon-s-order"},on:{click:e.publish_assignments}},[e._v("点 击 即 可 发 布 作 业")])],1),a("br")]),a("el-tab-pane",[a("span",{staticClass:"el-icon-search",attrs:{slot:"label"},slot:"label"},[e._v("查看作业详情")]),a("div",{attrs:{id:"input_box"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择查看的班级"},on:{change:e.get_class_assignments},model:{value:e.detail_work_class,callback:function(t){e.detail_work_class=t},expression:"detail_work_class"}},e._l(e.options,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",height:"400"}},[a("el-table-column",{attrs:{fixed:"",prop:"work_name",label:"作业名"}}),a("el-table-column",{attrs:{fixed:"right",label:"编辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-download"},on:{click:function(a){return e.download_assignments(t.row.work_code)}}},[e._v(" 下载作业包 ")]),a("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.delete_confirm(t.$index,e.tableData,t.row.work_code)}}},[e._v(" 删除作业 ")]),a("el-button",{attrs:{type:"text",icon:"el-icon-folder-opened"},on:{click:function(a){return e.detail_assignments(t.row.work_code)}}},[e._v(" 作业详情 ")])]}}])})],1)],1)],1)],1)])},L=[],I=(a("a630"),a("a434"),a("3ca3"),{data:function(){return{pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}},publish_work_deadline:"",options:[],publish_work_class:"",publish_work_code:"",publish_work_name:"",publish_work_desc:"",download_work_code:"",download_url:"",delete_work_code:"",detail_work_class:"",tableData:[]}},mounted:function(){this.class_list()},methods:{publish_assignments:function(){var e=this;this.publish_work_name?this.publish_work_desc?this.publish_work_deadline?this.publish_work_class?this.$axios.post(this.GLOBAL.config_ip+"/publish_assignments/",{token:localStorage.getItem("token"),work_name:this.publish_work_name,work_desc:this.publish_work_desc,work_deadline:this.publish_work_deadline.getTime(),work_class:this.publish_work_class}).then((function(t){localStorage.setItem("token",t.data.token),0==t.data.code?e.$notify({title:"成功",message:"发布成功",type:"success"}):26==t.data.code&&e.$notify({title:"错误",message:"当前用户不在此班级中，无法发布作业",type:"error"})})).catch((function(t){e.$notify({title:"错误",message:t,type:"error"})})):this.$message({message:"请选择班级",type:"warning"}):this.$message({message:"请选择截止日期",type:"warning"}):this.$message({message:"请输入作业要求",type:"warning"}):this.$message({message:"请输入作业名称",type:"warning"})},delete_assignments:function(e,t,a){var o=this;this.$axios.post(this.GLOBAL.config_ip+"/delete_assignments/",{token:localStorage.getItem("token"),work_code:a}).then((function(a){0==a.data.code?(t.splice(e,1),console.log(o),o.$notify({title:"成功",message:"已成功删除",type:"success"})):o.$notify({title:"错误",message:JSON.stringify(a.data.msg),type:"error"})})).catch((function(e){o.$notify({title:"错误",message:e,type:"error"})}))},get_class_assignments:function(){var e=this;this.$axios.post(this.GLOBAL.config_ip+"/get_assignments_list_by_class",{token:localStorage.getItem("token"),class:this.detail_work_class}).then((function(t){e.tableData=Array.from(t.data.work_list)}))},class_list:function(){var e=this;this.$axios.post(this.GLOBAL.config_ip+"/get_class_list",{token:localStorage.getItem("token")}).then((function(t){e.options=Array.from(t.data.class_list)}))},download_assignments:function(e){var t=this;this.$axios.post(this.GLOBAL.config_ip+"/download_assignments",{token:localStorage.getItem("token"),work_code:e}).then((function(e){localStorage.setItem("token",e.data.token),0==e.data.code&&window.open(t.GLOBAL.config_ip+e.data.download_url)})).catch((function(e){t.$notify({title:"错误",message:e,type:"error"})}))},detail_assignments:function(e){localStorage.setItem("work_code",e),location.href="#/teacher_view"},delete_confirm:function(e,t,a){var o=this;this.$confirm("此操作将永久删除该作业, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){o.delete_assignments(e,t,a)})).catch((function(){console.log(o),o.$notify({title:"消息",message:"已取消删除",type:"info"})}))}}}),O=I,C=Object(l["a"])(O,S,L,!1,null,null,null),A=C.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-tabs",{staticStyle:{height:"200px"},attrs:{"tab-position":e.tabPosition}},[a("el-tab-pane",{attrs:{label:"作业详情"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"work_no",label:"班级",width:"500%"}}),a("el-table-column",{attrs:{prop:"work_name",label:"进入班级",width:"500%"}})],1)],1),a("el-tab-pane",{attrs:{label:"作业提交"}},[e._v("作业上传 ")]),a("el-tab-pane",{attrs:{label:"查阅作业"}},[e._v("查阅作业")]),a("el-tab-pane",{attrs:{label:"分数查看"}},[a("h2",[e._v("请输入作业码")])])],1)},B=[],G={data:function(){return{tabPosition:"left",tableData:[]}},created:function(){var e=this;this.$axios.post(this.GLOBAL.config_ip+"/get_class_list/",{token:localStorage.getItem("token")}).then((function(t){localStorage.setItem("token",t.data.token),e.tableData=Array.from(t.data.calss_list)}))},methods:{}},z=G,j=Object(l["a"])(z,D,B,!1,null,null,null),E=j.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"class",label:"班级",width:"1000"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-caret-right"}),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.intoclass(t.$index,t.row)}}},[e._v("进入班级")])]}}])},[e._v("> ")])],1)},T=[],P={data:function(){return{tableData:[]}},created:function(){var e=this;this.$axios.post(this.GLOBAL.config_ip+"/get_class_list/",{token:localStorage.getItem("token")}).then((function(t){localStorage.setItem("token",t.data.token);for(var a=0;a<t.data.class_list.length;a++)t.data.class_list[a]={class:t.data.class_list[a]};localStorage.setItem("length",t.data.class_list.length),e.tableData=Array.from(t.data.class_list)}))},methods:{intoclass:function(e,t){localStorage.setItem("class",t.class),location.href="#/student_work"}}},R=P,M=Object(l["a"])(R,F,T,!1,null,null,null),V=M.exports,U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{attrs:{id:"link"}},[a("i",{staticClass:"el-icon-house"}),a("el-link",{attrs:{type:"primary",href:"#/login"}},[e._v("退出登录")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData}},[a("el-table-column",{attrs:{fixed:"",prop:"work_name",label:"作业名",width:"1000"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.checkdetail(t.$index)}}},[e._v("查看详情")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.postfile(t.$index)}}},[e._v("提交作业")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.previewwork(t.$index)}}},[e._v("预览作业")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.lookscore(t.$index)}}},[e._v("查看分数")])]}}])})],1)],1)},J=[],N=(a("d81d"),a("ac1f"),a("1276"),[]),H=[],q={data:function(){return{tableData:[]}},created:function(){var e=this;this.$axios.post(this.GLOBAL.config_ip+"/get_assignments_list_by_class/",{token:localStorage.getItem("token"),class:localStorage.getItem("class")}).then((function(t){localStorage.setItem("token",t.data.token),N.length=t.data.work_list.length,H.length=t.data.work_list.length;for(var a=0;a<t.data.work_list.length;a++)N[a]={work_name:t.data.work_list[a].work_name},H[a]=t.data.work_list[a].work_code;e.tableData=Array.from(N)}))},methods:{lookscore:function(e){var t=this;this.$axios.post(this.GLOBAL.config_ip+"/get_score/",{token:localStorage.getItem("token"),work_code:H[e],usr:localStorage.getItem("usr")}).then((function(e){console.log(e.data.score_detail.score),e.data.score_detail.score<0?(-2==e.data.score_detail.score&&t.$message({showClose:!0,message:"未提交作业",type:"error"}),-1==e.data.score_detail.score&&t.$message({showClose:!0,message:"老师未打分",type:"error"})):(localStorage.setItem("token",e.data.token),t.$alert("你的分数是"+e.data.score_detail.score+"分","成绩详情",{dangerouslyUseHTMLString:!0}))})).catch((function(e){alert(e)}))},postfile:function(e){localStorage.setItem("work_code",H[e]),console.log(H[e]),location.href="#/student_work_submit"},previewwork:function(e){var t=this;this.$axios.post(this.GLOBAL.config_ip+"/preview_assignment/",{token:localStorage.getItem("token"),work_code:H[e]}).then((function(e){window.open(t.GLOBAL.config_ip+e.data.url)})).catch((function(e){t.$message({showClose:!0,message:"你还未提交作业",type:"error"})}))},checkdetail:function(e){var t=this;console.log(H[e]),this.$axios.post(this.GLOBAL.config_ip+"/get_assignments_detail/",{token:localStorage.token,work_code:H[e]}).then((function(e){localStorage.setItem("token",e.data.token);var a=new Date(e.data.work_deadline).toLocaleDateString()+" ",o=t.$createElement,s=e.data.work_desc.split("\n").map((function(e){return o("p",null,e)}));s.push(o("p",null,"截止日期:"+a)),s.unshift(o("p",null,e.data.work_belong+"老师的作业要求:")),t.$alert(o("div",null,s),"查看详情",{dangerouslyUseHTMLString:!0})})).catch((function(e){alert(e)}))}}},K=q,Q=Object(l["a"])(K,U,J,!1,null,null,null),W=Q.exports,X=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"login_box"}},[a("h2",[e._v("修改密码")]),a("div",{attrs:{id:"form"}},[a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{placeholder:"请输入新密码","show-password":""},model:{value:e.newpassword1,callback:function(t){e.newpassword1=t},expression:"newpassword1"}})],1),a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{placeholder:"请重新输入新密码","show-password":""},model:{value:e.newpassword2,callback:function(t){e.newpassword2=t},expression:"newpassword2"}})],1)]),a("br"),a("br"),a("div",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:e.reset}},[e._v("确认修改")])],1)])},Y=[],Z={data:function(){return{newpassword1:"",newpassword2:""}},methods:{reset:function(){var e=this,t=this.newpassword1,a=this.newpassword2;t!=a?this.$message({showClose:!0,message:"两次密码不一致",type:"error"}):"000"==t?this.$message({showClose:!0,message:"密码不能为000",type:"error"}):this.$axios.post(this.GLOBAL.config_ip+"/reset_password/",{token:localStorage.getItem("token"),user:localStorage.getItem("usr"),newPwd:this.newpassword1}).then((function(t){localStorage.setItem("token",t.data.token),0==t.data.code&&(e.$message({showClose:!0,message:"修改成功",type:"success"}),location.href="#/student_class")})).catch((function(e){alert(e)}))}}},ee=Z,te=Object(l["a"])(ee,X,Y,!1,null,null,null),ae=te.exports,oe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-header",[a("el-page-header",{attrs:{content:"学生作业提交情况"},on:{back:e.goBack}})],1),a("el-main",[a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:1},placeholder:"发布者",disabled:!0,size:"mini"},model:{value:e.detail_publish_user_name,callback:function(t){e.detail_publish_user_name=t},expression:"detail_publish_user_name"}})],1),a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:1},placeholder:"作业名称",disabled:!0,size:"mini"},model:{value:e.detail_publish_work_name,callback:function(t){e.detail_publish_work_name=t},expression:"detail_publish_work_name"}})],1),a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:3},placeholder:"作业要求",disabled:!0,size:"mini"},model:{value:e.detail_publish_work_desc,callback:function(t){e.detail_publish_work_desc=t},expression:"detail_publish_work_desc"}})],1),a("div",{attrs:{id:"input_box"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"作业截止日期",disabled:!0,size:"mini"},model:{value:e.detail_publish_work_deadline,callback:function(t){e.detail_publish_work_deadline=t},expression:"detail_publish_work_deadline"}})],1)]),a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData_student,border:"",height:"280",size:"mini"}},[a("el-table-column",{attrs:{fixed:"",prop:"usr",label:"学号",width:"200"}}),a("el-table-column",{attrs:{fixed:"",prop:"score",formatter:e.formatterS,label:"分数",width:"200"}}),a("el-table-column",{attrs:{fixed:"",prop:"submitStat",formatter:e.formatterC,label:"提交状态",width:"200"}}),a("el-table-column",{attrs:{fixed:"right",label:"编辑"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",icon:"el-icon-search",size:"mini"},on:{click:function(a){return e.Preview(t.row.usr)}}},[e._v(" 预览作业 ")]),a("el-button",{attrs:{type:"text",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.showEditDialog(t.row.usr)}}},[e._v(" 修改成绩 ")])]}}])})],1),a("el-dialog",{attrs:{title:"修改成绩",visible:e.editDialogVisible,width:"30%",size:"mini"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{attrs:{model:e.editForm,"label-width":"40px"}},[a("el-form-item",{attrs:{label:"学号",size:"mini"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editForm.usr,callback:function(t){e.$set(e.editForm,"usr",t)},expression:"editForm.usr"}})],1),a("el-form-item",{attrs:{label:"成绩",size:"mini"}},[a("el-input",{attrs:{onkeyup:"this.value = this.value.replace(/[^\\d.]/g,'');"},model:{value:e.editForm.score,callback:function(t){e.$set(e.editForm,"score",t)},expression:"editForm.score"}})],1),a("font",{staticStyle:{"font-size":"10px","margin-left":"-30px"},attrs:{color:"red"}},[e._v(e._s(e.tips))])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"mini"},on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.editUserInfo(e.editForm)}}},[e._v("确 定")])],1)],1)],1)],1)},se=[],ne={data:function(){return{loading:!1,tableData_student:[],detail_publish_user_name:"",detail_publish_work_deadline:"",detail_publish_work_desc:"",detail_publish_work_name:"",editDialogVisible:!1,editForm:{},tips:"",tips1:""}},created:function(){var e=this;this.loading=!0,this.$axios.post(this.GLOBAL.config_ip+"/get_assignments_detail",{token:localStorage.getItem("token"),work_code:localStorage.getItem("work_code")}).then((function(t){localStorage.setItem("token",t.data.token),e.tableData_student=Array.from(t.data.stu_list),e.loading=!1})),this.$axios.post(this.GLOBAL.config_ip+"/get_assignments_detail",{token:localStorage.getItem("token"),work_code:localStorage.getItem("work_code")}).then((function(t){localStorage.setItem("token",t.data.token),e.detail_publish_user_name="发布者:"+t.data.work_belong,e.detail_publish_work_deadline=t.data.work_deadline,e.detail_publish_work_desc="作业要求:"+t.data.work_desc,e.detail_publish_work_name="作业名:"+t.data.work_name}))},methods:{goBack:function(){location.href="#/teacher"},formatterC:function(e,t,a,o){return 1==e.submitStat?"已提交作业":0==e.submitStat?"未提交作业":"未知"},formatterS:function(e,t,a,o){return e.score<-1?"未提交作业":-1==e.score?"暂无分数":e.score},Preview:function(e){var t=this;this.$axios.post(this.GLOBAL.config_ip+"/preview_assignment",{token:localStorage.getItem("token"),work_code:localStorage.getItem("work_code"),usr:e}).then((function(e){0==e.data.code?(window.open(t.GLOBAL.config_ip+e.data.url),localStorage.setItem("token",e.data.token)):t.$notify({title:"错误",message:"作业未提交",type:"error"})}))},showEditDialog:function(e){this.tips=this.tips1,this.editForm.usr=e,this.editDialogVisible=!0},editUserInfo:function(e){var t=this;1==/^((100)|(\d{1,2}))(\.\d{0,2})?$/.test(e.score)?this.$axios.post(this.GLOBAL.config_ip+"/grade_assignments",{token:localStorage.getItem("token"),work_code:localStorage.getItem("work_code"),updateTarget:[e]}).then((function(e){0==e.data.code&&(localStorage.setItem("token",e.data.token),t.$notify({title:"成功",message:"打分成功",type:"success"})),t.editForm.score="",t.tips="",t.$axios.post(t.GLOBAL.config_ip+"/get_assignments_detail",{token:localStorage.getItem("token"),work_code:localStorage.getItem("work_code")}).then((function(e){t.tableData_student=Array.from(e.data.stu_list),t.editDialogVisible=!1}))})):(this.editForm.score="",this.tips="请输入 0~100 的有效分数"),this.tips1=""}}},ie=ne,re=Object(l["a"])(ie,oe,se,!1,null,null,null),le=re.exports;o["default"].prototype.$router=u["a"],o["default"].use(u["a"]);var ce=new u["a"]({routes:[{path:"/",name:"login",component:g},{path:"/student_work_submit",name:"student_work_submit",component:$},{path:"/teacher",name:"teacher",component:A},{path:"/login",name:"login",component:g},{path:"/student01",name:"student01",component:E},{path:"/student_class",name:"student_class",component:V},{path:"/student_work",name:"student_work",component:W},{path:"/resetpassword",name:"resetpassword",component:ae},{path:"/teacher_view",name:"teacher_view",component:le}]}),de=a("5c96"),ue=a.n(de),pe=(a("0fae"),a("bc3a")),_e=a.n(pe),me=a("a7fe"),he=a.n(me),fe="http://47.96.235.211:3000",ge={config_ip:fe};o["default"].prototype.$axios=_e.a,o["default"].prototype.GLOBAL=ge,o["default"].use(he.a,_e.a),o["default"].config.productionTip=!1,o["default"].use(ue.a),new o["default"]({el:"#app",router:ce,components:{App:d},template:"<App/>",render:function(e){return e(d)}})},"85ec":function(e,t,a){},"9ce0":function(e,t,a){"use strict";var o=a("d64c"),s=a.n(o);s.a},d64c:function(e,t,a){}});
//# sourceMappingURL=app.426f39b7.js.map