(function(t){function e(e){for(var o,l,r=e[0],i=e[1],c=e[2],d=0,p=[];d<r.length;d++)l=r[d],Object.prototype.hasOwnProperty.call(n,l)&&n[l]&&p.push(n[l][0]),n[l]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,r=1;r<a.length;r++){var i=a[r];0!==n[i]&&(o=!1)}o&&(s.splice(e--,1),t=l(l.s=a[0]))}return t}var o={},n={app:0},s=[];function l(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=t,l.c=o,l.d=function(t,e,a){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(a,o,function(e){return t[e]}.bind(null,o));return a},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],i=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=i;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var o=a("85ec"),n=a.n(o);n.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},s=[],l={name:"App"},r=l,i=(a("034f"),a("2877")),c=Object(i["a"])(r,n,s,!1,null,null,null),u=c.exports,d=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"login_box"}},[a("h2",[t._v("LOGIN")]),a("div",{attrs:{id:"form"}},[a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}})],1),a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{placeholder:"请输入密码","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)]),a("br"),a("br"),a("div",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.postdata}},[t._v("login")])],1),t._m(0)])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Sign"}},[a("a",{attrs:{href:"http://baidu.com"}},[t._v("忘记密码?")])])}],h={data:function(){return{user:"",password:""}},methods:{postdata:function(){var t=this.password;localStorage.setItem("usr",this.user),this.$axios.post(this.GLOBAL.config_ip+"/login/",{usr:this.user,pwd:this.password}).then((function(e){console.log(e.data.code),0==e.data.code?1==e.data.identify?(localStorage.setItem("token",e.data.token),location.href="000"==t?"#/resetpassword":"#/student_class"):(localStorage.setItem("token",e.data.token),location.href="#/teacher"):alert(e.data.msg)})).catch((function(t){console.log(t)}))}}},f=h,b=(a("9ce0"),Object(i["a"])(f,p,_,!1,null,null,null)),m=b.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"login_box"}},[a("h2",[t._v("上传文件")]),t._m(0),a("br"),a("br"),a("div",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.submit}},[t._v("上传文件")])],1)])},w=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"form"}},[a("div",{attrs:{id:"input_box"}},[a("input",{attrs:{type:"file",id:"_f"}}),a("br"),a("br")])])}],g={headers:{"Content-Type":"multipart/form-data"}},v={data:function(){return{work_code:""}},methods:{submit:function(){var t=this,e=new FormData;e.append("file",_f.files[0]),e.append("work_code",localStorage.getItem("work_code")),e.append("token",localStorage.getItem("token")),this.$axios.post(this.GLOBAL.config_ip+"/submit_work/",e,g).then((function(e){console.log(e.data),0==e.data.code?(localStorage.setItem("token",e.data.token),t.$message({showClose:!0,message:"恭喜你,上传成功",type:"success"})):t.$message({showClose:!0,message:"错误的作业码",type:"error"})})).catch((function(t){alert(t+"请勿重复提交")}))}}},x=v,y=Object(i["a"])(x,k,w,!1,null,null,null),S=y.exports,$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"发作业"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{staticClass:"el-icon-edit",attrs:{slot:"label"},slot:"label"},[t._v("发布作业")]),a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:1,maxRows:2},placeholder:"作业名称"},model:{value:t.publish_work_name,callback:function(e){t.publish_work_name=e},expression:"publish_work_name"}})],1),a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:6,maxRows:12},placeholder:"作业要求"},model:{value:t.publish_work_desc,callback:function(e){t.publish_work_desc=e},expression:"publish_work_desc"}})],1),a("br"),a("div",{attrs:{id:"input_box"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择提交作业的截止日期"},model:{value:t.publish_work_deadline,callback:function(e){t.publish_work_deadline=e},expression:"publish_work_deadline"}}),a("el-select",{attrs:{clearable:"",placeholder:"请选择接收任务的班级"},model:{value:t.publish_work_class,callback:function(e){t.publish_work_class=e},expression:"publish_work_class"}},t._l(t.options,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("br"),a("br"),a("div",[a("el-button",{attrs:{type:"primary",sizes:"medium",plain:"",icon:"el-icon-s-order"},on:{click:t.publish_assignments}},[t._v("点 击 即 可 发 布 作 业")])],1),a("br")]),a("el-tab-pane",[a("span",{staticClass:"el-icon-search",attrs:{slot:"label"},slot:"label"},[t._v("查看作业详情")]),a("div",{attrs:{id:"input_box"}},[a("el-select",{attrs:{clearable:"",placeholder:"请选择查看的班级"},on:{change:t.get_class_assignments},model:{value:t.publish_work_class,callback:function(e){t.publish_work_class=e},expression:"publish_work_class"}},t._l(t.options,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",height:"400"}},[a("el-table-column",{attrs:{fixed:"",prop:"work_name",label:"作业名"}}),a("el-table-column",{attrs:{fixed:"right",label:"编辑"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",icon:"el-icon-download"},on:{click:function(a){return t.handleClick(e.row.work_code)}}},[t._v(" 收集作业 ")]),a("el-button",{attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return t.delete_assignments(e.$index,t.tableData,e.row.work_code)}}},[t._v(" 删除作业 ")])]}}])})],1)],1)],1)],1)},I=[],O=(a("a630"),a("a434"),a("3ca3"),{data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>Date.now()},shortcuts:[{text:"今天",onClick:function(t){t.$emit("pick",new Date)}},{text:"昨天",onClick:function(t){var e=new Date;e.setTime(e.getTime()-864e5),t.$emit("pick",e)}},{text:"一周前",onClick:function(t){var e=new Date;e.setTime(e.getTime()-6048e5),t.$emit("pick",e)}}]},publish_work_deadline:"",options:[],publish_work_class:"",publish_work_code:"",publish_work_name:"",publish_work_desc:"",download_work_code:"",download_url:"",delete_work_code:"",tableData:[]}},mounted:function(){this.class_list()},created:function(){this.$axios.post("http://47.96.235.211:3000/get_published_assignments_list",{token:localStorage.getItem("token")}).then((function(t){}))},methods:{publish_assignments:function(){this.$axios.post("http://47.96.235.211:3000/publish_assignments/",{token:localStorage.getItem("token"),work_name:this.publish_work_name,work_desc:this.publish_work_desc,work_deadline:this.publish_work_deadline.getTime(),work_class:this.publish_work_class}).then((function(t){localStorage.setItem("token",t.data.token),0==t.data.code?(alert("发布成功"),localStorage.setItem("work_code",t.data.work_code)):26==t.data.code&&alert("当前用户不在此班级，无法操作此作业")})).catch((function(t){console.log(t)}))},delete_assignments:function(t,e,a){this.$axios.post("http://47.96.235.211:3000/delete_assignments/",{token:localStorage.getItem("token"),work_code:a}).then((function(a){e.splice(t,1),0==a.data.code&&alert("删除成功")})).catch((function(t){alert(t)}))},get_class_assignments:function(t,e,a){var o=this;this.$axios.post("http://47.96.235.211:3000/get_assignments_list_by_class",{token:localStorage.getItem("token"),class:this.publish_work_class}).then((function(t){o.tableData=Array.from(t.data.work_list)}))},class_list:function(){var t=this;this.$axios.post("http://47.96.235.211:3000/get_class_list",{token:localStorage.getItem("token")}).then((function(e){t.options=Array.from(e.data.class_list)}))},handleClick:function(t){this.$axios.post("http://47.96.235.211:3000/download_assignments",{token:localStorage.getItem("token"),work_code:t}).then((function(t){localStorage.setItem("token",t.data.token),0==t.data.code&&window.open("http://47.96.235.211:3000"+t.data.download_url),this.setState()})).catch((function(t){console.log(t)}))}}}),L=O,D=Object(i["a"])(L,$,I,!1,null,null,null),A=D.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-tabs",{staticStyle:{height:"200px"},attrs:{"tab-position":t.tabPosition}},[a("el-tab-pane",{attrs:{label:"作业详情"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"work_no",label:"班级",width:"500%"}}),a("el-table-column",{attrs:{prop:"work_name",label:"进入班级",width:"500%"}})],1)],1),a("el-tab-pane",{attrs:{label:"作业提交"}},[t._v("作业上传 ")]),a("el-tab-pane",{attrs:{label:"查阅作业"}},[t._v("查阅作业")]),a("el-tab-pane",{attrs:{label:"分数查看"}},[a("h2",[t._v("请输入作业码")])])],1)},C=[],B={data:function(){return{tabPosition:"left",tableData:[]}},created:function(){var t=this;this.$axios.post(this.GLOBAL.config_ip+"/get_class_list/",{token:localStorage.getItem("token")}).then((function(e){localStorage.setItem("token",e.data.token),t.tableData=Array.from(e.data.calss_list)}))},methods:{}},G=B,T=Object(i["a"])(G,j,C,!1,null,null,null),E=T.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"class",label:"班级",width:"1000"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"el-icon-caret-right"}),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.intoclass(e.$index,e.row)}}},[t._v("进入班级")])]}}])},[t._v("> ")])],1)},M=[],R={data:function(){return{tableData:[]}},created:function(){var t=this;this.$axios.post(this.GLOBAL.config_ip+"/get_class_list/",{token:localStorage.getItem("token")}).then((function(e){localStorage.setItem("token",e.data.token);for(var a=0;a<e.data.class_list.length;a++)e.data.class_list[a]={class:e.data.class_list[a]};localStorage.setItem("length",e.data.class_list.length),t.tableData=Array.from(e.data.class_list)}))},methods:{intoclass:function(t,e){localStorage.setItem("class",e.class),location.href="#/student_work"}}},z=R,J=Object(i["a"])(z,P,M,!1,null,null,null),F=J.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{fixed:"",prop:"work_name",label:"作业名",width:"1000"}}),a("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.checkdetail(e.$index)}}},[t._v("查看详情")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.postfile(e.$index)}}},[t._v("提交作业")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.previewwork(e.$index)}}},[t._v("预览作业")]),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.lookscore(e.$index)}}},[t._v("查看分数")])]}}])})],1)},q=[],H=[],K=[],Q={data:function(){return{tableData:[]}},created:function(){var t=this;this.$axios.post(this.GLOBAL.config_ip+"/get_assignments_list_by_class/",{token:localStorage.getItem("token"),class:localStorage.getItem("class")}).then((function(e){localStorage.setItem("token",e.data.token),H.length=e.data.work_list.length,K.length=e.data.work_list.length;for(var a=0;a<e.data.work_list.length;a++)H[a]={work_name:e.data.work_list[a].work_name},K[a]=e.data.work_list[a].work_code;t.tableData=Array.from(H)}))},methods:{lookscore:function(t){alert("就这还想看分数")},postfile:function(t){localStorage.setItem("work_code",K[t]),console.log(K[t]),location.href="#/student_work_submit"},previewwork:function(t){var e=this;this.$axios.post(this.GLOBAL.config_ip+"/preview_assignment/",{token:localStorage.getItem("token"),work_code:K[t]}).then((function(t){window.open(e.GLOBAL.config_ip+t.data.url)})).catch((function(t){alert("你还未提交作业")}))},checkdetail:function(t){var e=this;console.log(K[t]),this.$axios.post(this.GLOBAL.config_ip+"/get_assignments_detail/",{token:localStorage.token,work_code:K[t]}).then((function(t){localStorage.setItem("token",t.data.token);var a=new Date(t.data.work_deadline);e.$alert(t.data.work_belong+"的作业:"+t.data.work_desc+"截止日期:"+a,"作业详情",{confirmButtonText:"确定",callback:function(t){e.$message({type:"info",message:"action: ".concat(t)})}})})).catch((function(t){alert(t)}))}}},U=Q,V=Object(i["a"])(U,N,q,!1,null,null,null),W=V.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"login_box"}},[a("h2",[t._v("修改密码")]),a("div",{attrs:{id:"form"}},[a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{placeholder:"请输入新密码"},model:{value:t.newpassword1,callback:function(e){t.newpassword1=e},expression:"newpassword1"}})],1),a("div",{attrs:{id:"input_box"}},[a("el-input",{attrs:{placeholder:"请重新输入新密码","show-password":""},model:{value:t.newpassword2,callback:function(e){t.newpassword2=e},expression:"newpassword2"}})],1)]),a("br"),a("br"),a("div",[a("el-button",{attrs:{type:"primary",plain:""},on:{click:t.reset}},[t._v("确认修改")])],1)])},Y=[],Z={data:function(){return{newpassword1:"",newpassword2:""}},methods:{reset:function(){var t=this.newpassword1,e=this.newpassword2;this.$axios.post(this.GLOBAL.config_ip+"/reset_password/",{token:localStorage.getItem("token"),user:localStorage.getItem("usr"),newPwd:this.newpassword1}).then((function(a){t!=e?alert("两次密码输入不一样"):"000"==t?alert("密码不能为000，请重新输入"):(localStorage.setItem("token",a.data.token),0==a.data.code&&(alert("修改成功"),location.href="#/student_class"))})).catch((function(t){alert(t)}))}}},tt=Z,et=Object(i["a"])(tt,X,Y,!1,null,null,null),at=et.exports;o["default"].prototype.$router=d["a"],o["default"].use(d["a"]);var ot=new d["a"]({routes:[{path:"/",name:"login",component:m},{path:"/student_work_submit",name:"student_work_submit",component:S},{path:"/teacher",name:"teacher",component:A},{path:"/login",name:"login",component:m},{path:"/student01",name:"student01",component:E},{path:"/student_class",name:"student_class",component:F},{path:"/student_work",name:"student_work",component:W},{path:"/resetpassword",name:"resetpassword",component:at}]}),nt=a("5c96"),st=a.n(nt),lt=(a("0fae"),a("bc3a")),rt=a.n(lt),it=a("a7fe"),ct=a.n(it),ut="http://47.96.235.211:3000",dt={config_ip:ut};o["default"].prototype.$axios=rt.a,o["default"].prototype.GLOBAL=dt,o["default"].use(ct.a,rt.a),o["default"].config.productionTip=!1,o["default"].use(st.a),new o["default"]({el:"#app",router:ot,components:{App:u},template:"<App/>",render:function(t){return t(u)}})},"85ec":function(t,e,a){},"9ce0":function(t,e,a){"use strict";var o=a("d64c"),n=a.n(o);n.a},d64c:function(t,e,a){}});
//# sourceMappingURL=app.23cfdf64.js.map